<!DOCTYPE html>
<html>
  <head>
    <title>Palestine Online</title>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="manifest" href="manifest.json" />
    <link rel="stylesheet" href="public/98.css" />
    <link rel="stylesheet" href="public/style.css" />
    <link rel="preconnect" href="https://web.archive.org">

    <link rel="preload" href="/images/bg-min.png" as="image">
    <link rel="preload" href="/images/bg-min.png" as="image">

    <link rel="preload" href="/public/tiles/keffiyeh-dithered.gif" as="image">
    <link rel="preload" href="/public/tiles/aqwa-man-tile-bg.jpg" as="image">
    <link rel="preload" href="/public/tiles/arabic-html-tutorial-tile-bg.jpg" as="image">
    <link rel="preload" href="/public/tiles/hadisoft-tile-bg.jpeg" as="image">
    <link rel="preload" href="/public/tiles/jukebox-arabia-tile-bg.gif" as="image">

    <link rel="preload" href="/public/tiles/lina-online-tile-bg.GIF" as="image">
    <link rel="preload" href="/public/tiles/nidal-jayyousi-tile-bg.jpg" as="image">
    <link rel="preload" href="/public/tiles/palestine-youth-union-tile-bg.jpg" as="image">
    <link rel="preload" href="/public/tiles/people-of-palestine-tile-bg.gif" as="image">
    <link rel="preload" href="/public/tiles/zuhair-tile-bg.gif" as="image">

    <link rel="preload" href="/public/tiles/rani-tile-bg.jpg" as="image">
    <link rel="preload" href="/public/tiles/samia-halaby-1-tile-bg.gif" as="image">
    <link rel="preload" href="/public/tiles/sharabati-tile-bg.JPG" as="image">
    <link rel="preload" href="/public/tiles/pals2.gif" as="image">
    <link rel="preload" href="/public/tiles/back.jpg" as="image">

    <link rel="preload" href="/public/tiles/back4.jpg" as="image">
    <link rel="preload" href="/public/tiles/hanthbg.gif" as="image">
    <link rel="preload" href="/public/tiles/cloudtil.jpg" as="image">
    <link rel="preload" href="/public/tiles/welcome.gif" as="image">
    <link rel="preload" href="/public/tiles/back.jpg" as="image">

    <script src="src/functions.js"></script>
  </head>

  <body onload="setFramePage()">
    <button class="mobile-share-alert">
      Page Link copied to clipboard.
    </button>
    <div id="mobile-dropdown-content" class="dropdown-content">
      <ul class="tree-view" id="tree"></ul>
    </div>
    <button class="mobile-top-nav">
      <div class="address-bar">
        <div id="address-bar-text">
          Samia Halaby's site
        </div>
      </div>
      <img class="mobile-nav-folder" src="public/directory_closed_cool-4.svg" onclick="dropdownContent.classList.toggle('open');" />
    </button>
    <div class="mobile-buttons-grid" id="mobile-nav">
      <button id="zoomSlider">
        <div class="field-row">
          <label id="mobile-zoom-out" class="slider-label">-</label>
          <input id="zoom-slider" step="any" onchange="changeZoom(this.value)" id="range26" type="range" min="1" max="21" value="11" />
          <label class="slider-label" id="mobile-zoom-in">+</label>
        </div>
      </button>
      <button class="mobile-button">
        <img class="mobile-button-graphic" src="public/back.svg" height="30px" onclick="window.history.back()" />
      </button>
      <button class="mobile-button">
        <img class="mobile-button-graphic" src="public/front.svg" height="30px" onclick="window.history.forward()" />
      </button>
      <button class="mobile-button">
        <img class="mobile-button-graphic" height="30px" src="public/icons/envelope_closed-1.svg" onclick="shareSite('mobile')"/>
      </button>
      <button class="mobile-button">
        <img class="mobile-button-graphic" height="30px" src="public/netmeeting-1.svg" onclick="setFramePage(true)" />
      </button>
      <button class="mobile-button">
        <img class="mobile-button-graphic" height="30px" src="public/icons/help_book_small-5.svg" onclick="setRandomPage()"/>
      </button>
    </div>
    <div class="window-grid" id="window">
      <div class="info-panel-container" id="info-panel-container" style="visibility: hidden">
        <div class="notes-header">Page Information</div>
        <div class="close-info-panel-button">
          <div class="title-bar-controls">
            <button class="notes-close-button" style="zoom: 1.4" aria-label="Close"></button>
          </div>
        </div>
      </div>
      <div class="window walkthru-window">
        <div class="title-bar">
          <div class="title-bar-text">
            Palestine Online
          </div>
        </div>
        <div class="window-body" style="margin: 0px; overflow: hidden;">
          <section style="margin: 6px 8px 4px 8px" class="field-row" style="justify-content: flex-start">
            <a class="tooltip">
              <input type="image" onclick="window.history.back()" src="public/back.svg" height="24px"
                style="margin-bottom: 2px" />
              <span class="tooltiptext">Go Back</span>
            </a>
            <a class="tooltip">
              <input type="image" onclick="window.history.forward()" src="public/front.svg" height="24px"
                style="margin-bottom: 2px" />
              <span class="tooltiptext">Go Forward</span>
            </a>
            <div class="divider">|</div>
            <!-- <a class="tooltip">
              <input style="opacity: 1; cursor: pointer" type="image" src="public/home.svg" height="25px" onclick="" />
              <span class="tooltiptext">Go to Homepage</span>
            </a> -->
            <a class="tooltip">
              <input type="image" src="public/icons/help_book_small-5.svg" height="25px" onclick="setRandomPage()" />
              <span class="tooltiptext">Go to random site</span>
            </a>
            <a class="tooltip">
              <input style="opacity: 1; cursor: pointer" type="image" src="public/netmeeting-1.svg" height="25px" onclick="setFramePage(true)" />
              <span class="tooltiptext">Reset current site</span>
            </a>
            <!-- <a class="tooltip">
              <input type="image" onclick="shareSite()" src="public/icons/envelope_closed-1.svg" height="25px" />
              <span id="share-page-tooltip" class="tooltiptext">Share Page</span>
            </a> -->
            <a class="tooltip">
            </a>
            <div class="dropdown-container">
              <pre id="current-site">
                </pre>
              <a class="tooltip">
                <div class="dropdown">
                </div>
                <span class="tooltiptext tooltip-address-bar">View websites</span>
              </a>
              <div id="dropdown-content" class="dropdown-content">
                <ul class="tree-view" id="tree-original"></ul>
              </div>
            </div>
            <a class="tooltip">
              <input type="image" onclick="showInformation()" src="public/icons/info.svg" height="25px" />
              <span class="tooltiptext tooltip-right">About Palestine Online</span>
            </a>
          </section>
          <iframe id="menu" title="Menu" width="100%" src=""
            style="position: absolute; width: 0; height: 0; border: 0; border: none; position: absolute; overflow-y: hidden; background-color: silver;"></iframe>
          <div id="frame-container">
            <div id="loading" style="
            position: absolute;
            display: none;
            margin-bottom: auto; 
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);"  >
              <img style="height: 50px;" src="public/loading4.gif"/>
            </div>  

            <div id="info-panel" class="closed" onclick="showInformation()" >
              <div class="info-container">
                <div>
                  <img id="info-flag" src="sites/secret-project-riso/imgs/palestine-flag2.gif"/>
                </div>
                <div class="info-title">
                  Palestine Online
                </div><br>

                <div class="info-body">
                  <div>This is a curated archive of websites created by Palestinians or about Palestine from the late 90s to early 2000s. The archive locates the history of the web as an important tool for Palestinian connection, expression, self determination, and resistance.</div><br>

                  <div>Created by Amad Ansari.</div><br>

                  <div>Special thanks to Sara bin Safwan, Zainab Hassoon, Todd Anderson, Saad Khan, Gufran Jadalla, and Zainab Aliyu for opportunities and guidance which have been integral for this project to flourish.</div><br>
                  <img height="120px" src="po-qr-code.png"/>
                </div>
              </div>
            </div> 

            <iframe id="frame" title="Frame" width="99.5%" src="">
            </iframe>
          </div>
        </div>
        <div id="breadcrumbs" class="status-bar">
        </div>
      </div>
    </div>
    </div>
    <script>

      const queryString = window.location.search;
      const params = new URLSearchParams(queryString);
      let mode = params.get('mode');
      let site = params.get('site');

      if (mode === 'presenter') {
        const demoIds = 

        // EARLY INFRASTRUCTURE
        ['hanieh-middle-east-report', // atrocities in gaza
        'birzeit-guide-to-palestinian-websites', // adam hanieh was a webmaster of first guide to Pal websites, pre proliferation of search engines, yahoo -> google maps
        'birzeit-golden-olive-awards',
        'planetedu', // [not archived] WAN, web statistics
        'palestine-yellow-pages', // [not archived]
        'palsoft',

        // PLACES
        'palestine-net-geography', // cities/municipalities homepages, placemaking ofc nothing new but definitely held a particular significance for 
        'salfeet', // gif slideshows, 3d animations and custom buttons which were the norm, scale of these websites allowed very volunteer-y, singular efforts, designer 
        'municipality-gaza', // as the web matured we saw more robust sites like municipality of gaza - centers -> public library, gaza city -> photo gallery
        'gaza-airport', // tone of hope and looking to the future, flight schedules, even in seemingly mundane info
        'jerusalem-hotel', // tourism efforts emerge : services -> quick view -> history
        'ministry-tourism', // reclaim the image of palestine as a destination, esp by the PA here
        // NEWS
        'al-quds-news', // on the flipside, news esp during the second intifada stands in stark contrast: the graphically and typographically dense news print is translated on the virtual hypertext document,
        'alayyam-news', // arabic text as images

        // ART, CULTURE, HERITAGE
        'sakakini', // institutional websites ofc [not archived]
        'palestine-wildlife-society', // official, for large orgs
        'hanna-safieh', // the web as a bridge for older, traditional artists, their father
        'omayya-joha', // political cartoonist who animated static analogue drawings w the then new GIF form
        'samia-halaby', // maybe most prolific pali artist who used tech was samia halaaby : words about palestine, kinetic painting
        'barghouti', // other than indivual artists, you had collective efforts or anonymous projects to translate existing palestinian culture to the web
        'palestine-embroider', //cross stitch - wedding, pillows TATRIZ
        'jukebox-arabia',
        // though web tech was limited compared to what we are used to today, 
        'villages-map', //bzu center for pal ?
        'palestine-history-timeline', // also independent efforts -> palestine history
        'al-aqsa-tour', // 
        'esam-shashaa-bio',
        'tutorials-in-arabic', // people were able to make their own websites 
        'web-4'

        // RECORDKEEPING, HONORING MARTYRS
        'ramallah-1996', // earliest days -> documentation, photo diary 
        'september-1996-memorial', // british guy: efforts to collect palestinian voices and saw potential of them , and as evidence and appeal to westerners who he said were often unfamiliar w the conflict 
        'september-2000-info', // martyrs list
        'barghouti-memorial', // blood gif, titled blood bar.gif, tho crude by todays standards, used by palestinians

        // PEOPLE OF PALESTINE ONLINE
        'people-of-palestine', // directory of people, hand collected 
        'the-holly-land', // anonymous, homepage type websites
        'amnah-site', // what you could find on a more personal site, often times students would take a class on web development, like we saw w barghouti, the demarcation of web1.0 and having a martyrs section, black and red
        'jayyousi-pages', // connection
        'asa-group', //
        'zuhair-page',
        'reality-of-palestine'
      ]
        let demoCounter = 0;
        queryUpdate(demoIds[demoCounter]);

        document.addEventListener("keydown", (e) => {
        if (!e.repeat &&  (e.key === 'ArrowRight' || e.key === 'ArrowLeft')) {
          if (e.key === 'ArrowRight') demoCounter++;
          if (e.key === 'ArrowLeft') demoCounter--;
          if (demoCounter < 0) demoCounter = demoIds.length - 1;
          if (demoCounter > demoIds.length - 1) demoCounter = 0;
          console.log(`DEMO COUNTER "${demoCounter} ${demoIds[demoCounter]}"`);
          queryUpdate(demoIds[demoCounter]);
        } else {
          console.log(`Key "${e.key}" repeating [event: keydown]`);
        }
      });
      }

      const mobileZoomOut = document.getElementById('mobile-zoom-out');
      const mobileZoomIn = document.getElementById('mobile-zoom-in');
      const zoomSlider = document.getElementById('zoom-slider');
      let zoomValue;

      let addressBar = document.querySelector(".address-bar");
      addressBar.disabled = true;

      let sliderButton = document.getElementById("zoomSlider");
      sliderButton.disabled = true;

      let mobileShareAlert = document.querySelector(".mobile-share-alert");
      mobileShareAlert.disabled = true;

      mobileZoomOut.addEventListener('touchstart', () => {
        zoomSlider.value -= 1;
        changeZoom(zoomSlider.value)
      });

      mobileZoomIn.addEventListener('touchstart', () => {
        zoomSlider.value++;
        changeZoom(zoomSlider.value)
      });

      // change wallpaper on click of page body  
      document.body.addEventListener('click', function (event) {
        setWallpaper();
      });
      // but not window
      document.querySelector('.window-grid').addEventListener('click', function (event) {
        event.stopPropagation();
      });

      // adjust dropdown size based on flex address bar
      document.querySelector('#current-site').addEventListener('click', function () {
        const dropdownContent = document.querySelector('#dropdown-content');
        dropdownContent.style.width = `${document.querySelector('.dropdown-container').offsetWidth - 2}px`;
        dropdownContent.classList.toggle('open');
      });

      // add event listener to dropdown bar and button
      document.querySelector('.dropdown').addEventListener('click', function () {
        const dropdownContent = document.querySelector('#dropdown-content');
        dropdownContent.style.width = `${document.querySelector('.dropdown-container').offsetWidth - 3}px`;
        dropdownContent.classList.toggle('open');
      });

      document.querySelector('.mobile-top-nav').addEventListener('click', function () {
        const dropdownContent1 = document.querySelector('#mobile-dropdown-content');
        dropdownContent1.classList.toggle('open');
      });

      const treeViewContainer = document.getElementById('tree');
      const treeViewContainerOriginal = document.getElementById('tree-original');

      // Create the tree view from the data object and append it to the container
      treeViewContainer.appendChild(createTreeView(siteTree));
      treeViewContainerOriginal.appendChild(createTreeView(siteTree));
      
      document.getElementById('frame').onload = function () {
        changeZoom(zoomValue);
      }

      function shareSite(mode = 'desktop') {
  console.log('share site');
  const scrollPosition = document.getElementById('frame').contentWindow.scrollY;

  let dummy = document.createElement('input'),
  windowLocation = (window.location.href).replace(/&page=.*$/, '');
  // const iframe = document.getElementById('frame')
  
  const regex = /\/sites\/(.*)/;
  
  // console.log('path', document.getElementById("frame").contentWindow.location.href);

  const path = (document.getElementById("frame").contentWindow.location.href).match(regex)[1];
  console.log('path', path);
  windowLocation += `&page=${path}`;
  document.body.appendChild(dummy);
  dummy.value = windowLocation;
  dummy.select();
  document.execCommand('copy');
  document.body.removeChild(dummy);

  const tooltip = document.getElementById('share-page-tooltip');
  tooltip.innerHTML = 'Link copied.';

  if (mode === 'desktop') {
    setTimeout(() => tooltip.innerHTML = 'Share Page' , 2500)
  }
  if (mode = 'mobile') {
    mobileShareAlert.style.visibility = 'visible';
    setTimeout(() => mobileShareAlert.style.visibility = 'hidden', 2500)
  }
};
    </script>
  </body>
</html>
